<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Homepage</title>
    <link rel="stylesheet" href="/assets/style.css">
  </head>
  <body>
    <div class="container">
      <div class="bar">
        <input class="searchbar" type="text" title="Search" id="search" placeholder="Rechercher sur le web">
      </div>

      <div class="flex margin-top">
        <a class="card card-hard" href="https://youtube.com" tooltip="Youtube">
          <img class="image" src="/assets/Youtube-Play.png" alt="youtube"/>
        </a>
        <a class="card card-hard" href="https://www.primevideo.com/" tooltip="Netflix">
          <img class="image" src="/assets/prime-small.png"  alt="prime"/>
        </a>
        <a class="card card-hard" href="https://www.disneyplus.com/fr-fr/" tooltip="Disney+">
          <img class="image" src="/assets/D+.png" alt="disney"/>
        </a>
        <a class="card card-hard" href="https://www.crunchyroll.com/" tooltip="Crunchyroll">
          <img class="image" src="/assets/crunchyroll.webp" alt="Crunchyroll"/>
        </a>
        <a class="card card-hard" href="https://anime-sama.org" tooltip="Anime Sama">
          <img class="image" src="/assets/anime-sama.png" alt="anime sama"/>
        </a>
        <a class="card card-hard" href="https://www.canalplus.com/sport/" tooltip="Canal+ Sport">
          <img class="image" src="/assets/canal+-sport.png"  alt="netflix"/>
        </a>
      </div>

      <a href="https://www.pexels.com" class="backlink-pexels">Photos provided by Pexels</a>

      <script type="text/javascript">
        var input = document.querySelector("#search");
        input.addEventListener("keyup", function(event) {
          // Number 13 is the "Enter" key on the keyboard
          if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            window.location = "https://www.google.fr/search?q=" + input.value;
          }
        });
      </script>

      <script>
        window.addEventListener('load', function() {
          const input = document.querySelector('#search');
          input.focus();

          const xmlHttp = new XMLHttpRequest();
          xmlHttp.open("GET", '/random');
          xmlHttp.send(null);

          xmlHttp.onreadystatechange = function() {
            const imageUrl = xmlHttp.response.replaceAll(/&[hw]+=[0-9]+/g, "");
            const body = document.querySelector("body");
            body.style['background-image'] = 'url("' + imageUrl + '")';
          }
          document.querySelector("#search").focus();
        });
      </script>
    </div>
  </body>
</html>
